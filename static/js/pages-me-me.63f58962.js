(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-me-me"],{"095a":function(e,n,o){"use strict";var t=o("4ea4");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,o("96cf");var r=t(o("1da1")),i={data:function(){return{userinfo:"",refresh_token:"",error:"",notloggedin:null,loggingOutProcessing:!1}},onShow:function(){var e=this;return(0,r.default)(regeneratorRuntime.mark((function n(){var o,t;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=e,o.notloggedin=null,console.log("before userinfo: ",uni.getStorageSync("userinfo")),console.log("before refresh_token: ",uni.getStorageSync("refresh_token")),console.log("checking account status"),t=uni.getStorageSync("notloggedin"),console.log("print val"+t),console.log("before"+o.notloggedin),n.next=10,uni.getStorageSync("notloggedin");case 10:o.notloggedin=n.sent,o.userinfo=uni.getStorageSync("userinfo"),console.log("after userinfo: ",uni.getStorageSync("userinfo")),console.log("after"+o.notloggedin);case 14:case"end":return n.stop()}}),n)})))()},onPullDownRefresh:function(){var e=this;return(0,r.default)(regeneratorRuntime.mark((function n(){var o,t;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("refresh"),o=e,o.notloggedin=null,console.log("before userinfo: ",uni.getStorageSync("userinfo")),console.log("before refresh_token: ",uni.getStorageSync("refresh_token")),console.log("checking account status"),t=uni.getStorageSync("notloggedin"),console.log("print val"+t),console.log("before"+o.notloggedin),n.next=11,uni.getStorageSync("notloggedin");case 11:o.notloggedin=n.sent,o.userinfo=uni.getStorageSync("userinfo"),console.log("after userinfo: ",uni.getStorageSync("userinfo")),console.log("after"+o.notloggedin),setTimeout((function(){uni.stopPullDownRefresh()}),1e3);case 16:case"end":return n.stop()}}),n)})))()},methods:{_logout:function(){var e=this;e.loggingOutProcessing=!0,this.refresh_token=uni.getStorageSync("refresh_token"),console.log(this.refresh_token);var n=getApp().globalData.base_url+"/auth/user/logout";uni.request({url:n,data:{token:this.refresh_token},method:"DELETE",header:{"content-type":"application/json"},success:function(){var n=(0,r.default)(regeneratorRuntime.mark((function n(o){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("trying to log out..."),n.next=3,uni.removeStorageSync("userinfo");case 3:return n.next=5,uni.removeStorageSync("refresh_token");case 5:return n.next=7,uni.setStorageSync("notloggedin",!0);case 7:return e.loggingOutProcessing=!1,n.next=10,uni.showToast({title:"You have successfully logged out.",duration:2e3});case 10:uni.reLaunch({url:"../me/me"});case 11:case"end":return n.stop()}}),n)})));function o(e){return n.apply(this,arguments)}return o}()})},_directToLogin:function(){uni.navigateTo({url:"../login/login",success:function(e){},fail:function(){},complete:function(){}})}}};n.default=i},"2f5c":function(e,n,o){"use strict";o.r(n);var t=o("3431"),r=o("de86");for(var i in r)"default"!==i&&function(e){o.d(n,e,(function(){return r[e]}))}(i);o("c23e");var u,s=o("f0c5"),a=Object(s["a"])(r["default"],t["b"],t["c"],!1,null,"0719c145",null,!1,t["a"],u);n["default"]=a.exports},3431:function(e,n,o){"use strict";var t;o.d(n,"b",(function(){return r})),o.d(n,"c",(function(){return i})),o.d(n,"a",(function(){return t}));var r=function(){var e=this,n=e.$createElement,o=e._self._c||n;return o("v-uni-view",[1!=e.notloggedin&&0!=e.notloggedin||e.notloggedin?e._e():o("v-uni-view",[o("v-uni-view",{staticClass:"uni-padding-wrap uni-common-mt"},[o("v-uni-view",{staticClass:"uni-hello-text",staticStyle:{"margin-bottom":"500rpx"}},[e._v("You are logged in as "+e._s(e.userinfo))]),o("v-uni-view",{staticClass:"uni-btn-v uni-common-mt"},[o("v-uni-button",{attrs:{type:"primary",loading:e.loggingOutProcessing},on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e._logout.apply(void 0,arguments)}}},[e._v(e._s(0==e.loggingOutProcessing?"log out":"logging out in progress"))])],1)],1)],1),1!=e.notloggedin&&0!=e.notloggedin||!e.notloggedin?e._e():o("v-uni-view",[o("v-uni-view",{staticClass:"uni-padding-wrap uni-common-mt"},[o("v-uni-view",{staticClass:"uni-hello-text",staticStyle:{"margin-bottom":"500rpx"}},[e._v("You are not logged in yet.")]),o("v-uni-view",{staticClass:"uni-btn-v uni-common-mt"},[o("v-uni-button",{attrs:{type:"primary"},on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e._directToLogin.apply(void 0,arguments)}}},[e._v("log in")])],1)],1)],1)],1)},i=[]},c23e:function(e,n,o){"use strict";var t=o("fa54"),r=o.n(t);r.a},ce95:function(e,n,o){var t=o("24fb");n=t(!1),n.push([e.i,".container[data-v-0719c145]{padding:20px;font-size:14px;line-height:24px}",""]),e.exports=n},de86:function(e,n,o){"use strict";o.r(n);var t=o("095a"),r=o.n(t);for(var i in t)"default"!==i&&function(e){o.d(n,e,(function(){return t[e]}))}(i);n["default"]=r.a},fa54:function(e,n,o){var t=o("ce95");"string"===typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);var r=o("4f06").default;r("5f152187",t,!0,{sourceMap:!1,shadowMode:!1})}}]);